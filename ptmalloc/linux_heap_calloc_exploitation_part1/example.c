#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int
main()
{
	long *a,*b,*c;

	a = malloc(20);
	b = malloc(20);

	memset(b, 'A', 20);
	fprintf(stderr, "a %p\n", a);
	fprintf(stderr, "b %p\n", b);

	free(b);    // go into the free chunk
	b[-1] |= 2; // set the mmap bit to on

	c = calloc(1, 20);  // return b
	fprintf(stderr, "c %p\n", c);
	
	for (int i = 0; i < 20; i++) {
		printf("%.2x", ((char *)c)[i]);
	}
	printf("\n");
	return 0;
}
